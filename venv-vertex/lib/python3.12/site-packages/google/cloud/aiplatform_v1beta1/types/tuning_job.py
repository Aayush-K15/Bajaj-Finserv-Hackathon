














from __future__ import annotations

from typing import MutableMapping, MutableSequence

import proto  

from google.cloud.aiplatform_v1beta1.types import content
from google.cloud.aiplatform_v1beta1.types import encryption_spec as gca_encryption_spec
from google.cloud.aiplatform_v1beta1.types import job_state
from google.protobuf import struct_pb2  
from google.protobuf import timestamp_pb2  
from google.rpc import status_pb2  


__protobuf__ = proto.module(
    package="google.cloud.aiplatform.v1beta1",
    manifest={
        "TuningJob",
        "TunedModel",
        "SupervisedTuningDatasetDistribution",
        "SupervisedTuningDataStats",
        "DatasetDistribution",
        "DatasetStats",
        "DistillationDataStats",
        "TuningDataStats",
        "SupervisedHyperParameters",
        "SupervisedTuningSpec",
        "DistillationSpec",
        "DistillationHyperParameters",
        "PartnerModelTuningSpec",
        "TunedModelRef",
        "TunedModelCheckpoint",
    },
)


class TuningJob(proto.Message):
    r

    base_model: str = proto.Field(
        proto.STRING,
        number=4,
        oneof="source_model",
    )
    supervised_tuning_spec: "SupervisedTuningSpec" = proto.Field(
        proto.MESSAGE,
        number=5,
        oneof="tuning_spec",
        message="SupervisedTuningSpec",
    )
    distillation_spec: "DistillationSpec" = proto.Field(
        proto.MESSAGE,
        number=17,
        oneof="tuning_spec",
        message="DistillationSpec",
    )
    partner_model_tuning_spec: "PartnerModelTuningSpec" = proto.Field(
        proto.MESSAGE,
        number=21,
        oneof="tuning_spec",
        message="PartnerModelTuningSpec",
    )
    name: str = proto.Field(
        proto.STRING,
        number=1,
    )
    tuned_model_display_name: str = proto.Field(
        proto.STRING,
        number=2,
    )
    description: str = proto.Field(
        proto.STRING,
        number=3,
    )
    custom_base_model: str = proto.Field(
        proto.STRING,
        number=26,
    )
    state: job_state.JobState = proto.Field(
        proto.ENUM,
        number=6,
        enum=job_state.JobState,
    )
    create_time: timestamp_pb2.Timestamp = proto.Field(
        proto.MESSAGE,
        number=7,
        message=timestamp_pb2.Timestamp,
    )
    start_time: timestamp_pb2.Timestamp = proto.Field(
        proto.MESSAGE,
        number=8,
        message=timestamp_pb2.Timestamp,
    )
    end_time: timestamp_pb2.Timestamp = proto.Field(
        proto.MESSAGE,
        number=9,
        message=timestamp_pb2.Timestamp,
    )
    update_time: timestamp_pb2.Timestamp = proto.Field(
        proto.MESSAGE,
        number=10,
        message=timestamp_pb2.Timestamp,
    )
    error: status_pb2.Status = proto.Field(
        proto.MESSAGE,
        number=11,
        message=status_pb2.Status,
    )
    labels: MutableMapping[str, str] = proto.MapField(
        proto.STRING,
        proto.STRING,
        number=12,
    )
    experiment: str = proto.Field(
        proto.STRING,
        number=13,
    )
    tuned_model: "TunedModel" = proto.Field(
        proto.MESSAGE,
        number=14,
        message="TunedModel",
    )
    tuning_data_stats: "TuningDataStats" = proto.Field(
        proto.MESSAGE,
        number=15,
        message="TuningDataStats",
    )
    pipeline_job: str = proto.Field(
        proto.STRING,
        number=18,
    )
    encryption_spec: gca_encryption_spec.EncryptionSpec = proto.Field(
        proto.MESSAGE,
        number=16,
        message=gca_encryption_spec.EncryptionSpec,
    )
    service_account: str = proto.Field(
        proto.STRING,
        number=22,
    )
    output_uri: str = proto.Field(
        proto.STRING,
        number=25,
    )


class TunedModel(proto.Message):
    r

    model: str = proto.Field(
        proto.STRING,
        number=1,
    )
    endpoint: str = proto.Field(
        proto.STRING,
        number=2,
    )
    checkpoints: MutableSequence["TunedModelCheckpoint"] = proto.RepeatedField(
        proto.MESSAGE,
        number=3,
        message="TunedModelCheckpoint",
    )


class SupervisedTuningDatasetDistribution(proto.Message):
    r

    class DatasetBucket(proto.Message):
        r

        count: float = proto.Field(
            proto.DOUBLE,
            number=1,
        )
        left: float = proto.Field(
            proto.DOUBLE,
            number=2,
        )
        right: float = proto.Field(
            proto.DOUBLE,
            number=3,
        )

    sum: int = proto.Field(
        proto.INT64,
        number=1,
    )
    billable_sum: int = proto.Field(
        proto.INT64,
        number=9,
    )
    min_: float = proto.Field(
        proto.DOUBLE,
        number=2,
    )
    max_: float = proto.Field(
        proto.DOUBLE,
        number=3,
    )
    mean: float = proto.Field(
        proto.DOUBLE,
        number=4,
    )
    median: float = proto.Field(
        proto.DOUBLE,
        number=5,
    )
    p5: float = proto.Field(
        proto.DOUBLE,
        number=6,
    )
    p95: float = proto.Field(
        proto.DOUBLE,
        number=7,
    )
    buckets: MutableSequence[DatasetBucket] = proto.RepeatedField(
        proto.MESSAGE,
        number=8,
        message=DatasetBucket,
    )


class SupervisedTuningDataStats(proto.Message):
    r

    tuning_dataset_example_count: int = proto.Field(
        proto.INT64,
        number=1,
    )
    total_tuning_character_count: int = proto.Field(
        proto.INT64,
        number=2,
    )
    total_billable_character_count: int = proto.Field(
        proto.INT64,
        number=3,
    )
    total_billable_token_count: int = proto.Field(
        proto.INT64,
        number=9,
    )
    tuning_step_count: int = proto.Field(
        proto.INT64,
        number=4,
    )
    user_input_token_distribution: "SupervisedTuningDatasetDistribution" = proto.Field(
        proto.MESSAGE,
        number=5,
        message="SupervisedTuningDatasetDistribution",
    )
    user_output_token_distribution: "SupervisedTuningDatasetDistribution" = proto.Field(
        proto.MESSAGE,
        number=6,
        message="SupervisedTuningDatasetDistribution",
    )
    user_message_per_example_distribution: "SupervisedTuningDatasetDistribution" = (
        proto.Field(
            proto.MESSAGE,
            number=7,
            message="SupervisedTuningDatasetDistribution",
        )
    )
    user_dataset_examples: MutableSequence[content.Content] = proto.RepeatedField(
        proto.MESSAGE,
        number=8,
        message=content.Content,
    )
    total_truncated_example_count: int = proto.Field(
        proto.INT64,
        number=10,
    )
    truncated_example_indices: MutableSequence[int] = proto.RepeatedField(
        proto.INT64,
        number=11,
    )
    dropped_example_reasons: MutableSequence[str] = proto.RepeatedField(
        proto.STRING,
        number=12,
    )


class DatasetDistribution(proto.Message):
    r

    class DistributionBucket(proto.Message):
        r

        count: int = proto.Field(
            proto.INT64,
            number=1,
        )
        left: float = proto.Field(
            proto.DOUBLE,
            number=2,
        )
        right: float = proto.Field(
            proto.DOUBLE,
            number=3,
        )

    sum: float = proto.Field(
        proto.DOUBLE,
        number=1,
    )
    min_: float = proto.Field(
        proto.DOUBLE,
        number=2,
    )
    max_: float = proto.Field(
        proto.DOUBLE,
        number=3,
    )
    mean: float = proto.Field(
        proto.DOUBLE,
        number=4,
    )
    median: float = proto.Field(
        proto.DOUBLE,
        number=5,
    )
    p5: float = proto.Field(
        proto.DOUBLE,
        number=6,
    )
    p95: float = proto.Field(
        proto.DOUBLE,
        number=7,
    )
    buckets: MutableSequence[DistributionBucket] = proto.RepeatedField(
        proto.MESSAGE,
        number=8,
        message=DistributionBucket,
    )


class DatasetStats(proto.Message):
    r

    tuning_dataset_example_count: int = proto.Field(
        proto.INT64,
        number=1,
    )
    total_tuning_character_count: int = proto.Field(
        proto.INT64,
        number=2,
    )
    total_billable_character_count: int = proto.Field(
        proto.INT64,
        number=3,
    )
    tuning_step_count: int = proto.Field(
        proto.INT64,
        number=4,
    )
    user_input_token_distribution: "DatasetDistribution" = proto.Field(
        proto.MESSAGE,
        number=5,
        message="DatasetDistribution",
    )
    user_output_token_distribution: "DatasetDistribution" = proto.Field(
        proto.MESSAGE,
        number=6,
        optional=True,
        message="DatasetDistribution",
    )
    user_message_per_example_distribution: "DatasetDistribution" = proto.Field(
        proto.MESSAGE,
        number=7,
        message="DatasetDistribution",
    )
    user_dataset_examples: MutableSequence[content.Content] = proto.RepeatedField(
        proto.MESSAGE,
        number=8,
        message=content.Content,
    )


class DistillationDataStats(proto.Message):
    r

    training_dataset_stats: "DatasetStats" = proto.Field(
        proto.MESSAGE,
        number=1,
        message="DatasetStats",
    )


class TuningDataStats(proto.Message):
    r

    supervised_tuning_data_stats: "SupervisedTuningDataStats" = proto.Field(
        proto.MESSAGE,
        number=1,
        oneof="tuning_data_stats",
        message="SupervisedTuningDataStats",
    )
    distillation_data_stats: "DistillationDataStats" = proto.Field(
        proto.MESSAGE,
        number=3,
        oneof="tuning_data_stats",
        message="DistillationDataStats",
    )


class SupervisedHyperParameters(proto.Message):
    r

    class AdapterSize(proto.Enum):
        r
        ADAPTER_SIZE_UNSPECIFIED = 0
        ADAPTER_SIZE_ONE = 1
        ADAPTER_SIZE_TWO = 6
        ADAPTER_SIZE_FOUR = 2
        ADAPTER_SIZE_EIGHT = 3
        ADAPTER_SIZE_SIXTEEN = 4
        ADAPTER_SIZE_THIRTY_TWO = 5

    epoch_count: int = proto.Field(
        proto.INT64,
        number=1,
    )
    learning_rate_multiplier: float = proto.Field(
        proto.DOUBLE,
        number=2,
    )
    learning_rate: float = proto.Field(
        proto.DOUBLE,
        number=6,
    )
    adapter_size: AdapterSize = proto.Field(
        proto.ENUM,
        number=3,
        enum=AdapterSize,
    )
    batch_size: int = proto.Field(
        proto.INT64,
        number=5,
    )


class SupervisedTuningSpec(proto.Message):
    r

    class TuningMode(proto.Enum):
        r
        TUNING_MODE_UNSPECIFIED = 0
        TUNING_MODE_FULL = 1
        TUNING_MODE_PEFT_ADAPTER = 2

    training_dataset_uri: str = proto.Field(
        proto.STRING,
        number=1,
    )
    validation_dataset_uri: str = proto.Field(
        proto.STRING,
        number=2,
    )
    hyper_parameters: "SupervisedHyperParameters" = proto.Field(
        proto.MESSAGE,
        number=3,
        message="SupervisedHyperParameters",
    )
    export_last_checkpoint_only: bool = proto.Field(
        proto.BOOL,
        number=6,
    )
    tuning_mode: TuningMode = proto.Field(
        proto.ENUM,
        number=7,
        enum=TuningMode,
    )


class DistillationSpec(proto.Message):
    r

    base_teacher_model: str = proto.Field(
        proto.STRING,
        number=5,
        oneof="teacher_model",
    )
    tuned_teacher_model_source: str = proto.Field(
        proto.STRING,
        number=6,
        oneof="teacher_model",
    )
    training_dataset_uri: str = proto.Field(
        proto.STRING,
        number=1,
    )
    validation_dataset_uri: str = proto.Field(
        proto.STRING,
        number=2,
        optional=True,
    )
    hyper_parameters: "DistillationHyperParameters" = proto.Field(
        proto.MESSAGE,
        number=3,
        message="DistillationHyperParameters",
    )
    student_model: str = proto.Field(
        proto.STRING,
        number=4,
    )
    pipeline_root_directory: str = proto.Field(
        proto.STRING,
        number=7,
    )


class DistillationHyperParameters(proto.Message):
    r

    epoch_count: int = proto.Field(
        proto.INT64,
        number=1,
        optional=True,
    )
    learning_rate_multiplier: float = proto.Field(
        proto.DOUBLE,
        number=2,
        optional=True,
    )
    adapter_size: "SupervisedHyperParameters.AdapterSize" = proto.Field(
        proto.ENUM,
        number=3,
        enum="SupervisedHyperParameters.AdapterSize",
    )


class PartnerModelTuningSpec(proto.Message):
    r

    training_dataset_uri: str = proto.Field(
        proto.STRING,
        number=1,
    )
    validation_dataset_uri: str = proto.Field(
        proto.STRING,
        number=2,
    )
    hyper_parameters: MutableMapping[str, struct_pb2.Value] = proto.MapField(
        proto.STRING,
        proto.MESSAGE,
        number=3,
        message=struct_pb2.Value,
    )


class TunedModelRef(proto.Message):
    r

    tuned_model: str = proto.Field(
        proto.STRING,
        number=1,
        oneof="tuned_model_ref",
    )
    tuning_job: str = proto.Field(
        proto.STRING,
        number=2,
        oneof="tuned_model_ref",
    )
    pipeline_job: str = proto.Field(
        proto.STRING,
        number=3,
        oneof="tuned_model_ref",
    )


class TunedModelCheckpoint(proto.Message):
    r

    checkpoint_id: str = proto.Field(
        proto.STRING,
        number=1,
    )
    epoch: int = proto.Field(
        proto.INT64,
        number=2,
    )
    step: int = proto.Field(
        proto.INT64,
        number=3,
    )
    endpoint: str = proto.Field(
        proto.STRING,
        number=4,
    )


__all__ = tuple(sorted(__protobuf__.manifest))
