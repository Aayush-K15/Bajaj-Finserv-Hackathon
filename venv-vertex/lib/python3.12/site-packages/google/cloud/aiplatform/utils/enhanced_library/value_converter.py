












from __future__ import absolute_import
from google.protobuf.struct_pb2 import Value
from google.protobuf import json_format
from proto.marshal.collections.maps import MapComposite
from proto.marshal import Marshal
from proto import Message
from proto.message import MessageMeta


def to_value(self: Message) -> Value:
    
    tmp_dict = json_format.MessageToDict(self._pb)
    return json_format.ParseDict(tmp_dict, Value())


def from_value(cls: MessageMeta, value: Value) -> Message:
    
    value_dict = json_format.MessageToDict(value)
    return json_format.ParseDict(value_dict, cls()._pb)


def from_map(cls: MessageMeta, map_: MapComposite) -> Message:
    
    marshal = Marshal(name="marshal")
    pb = marshal.to_proto(Value, map_)
    return from_value(cls, pb)
