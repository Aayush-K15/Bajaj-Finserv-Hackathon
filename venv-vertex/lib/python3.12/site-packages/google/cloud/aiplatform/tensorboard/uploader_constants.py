

import dataclasses

from tensorboard.plugins.distribution import distributions_plugin
from tensorboard.plugins.graph import graphs_plugin
from tensorboard.plugins.histogram import histograms_plugin
from tensorboard.plugins.hparams import hparams_plugin
from tensorboard.plugins.image import images_plugin
from tensorboard.plugins.scalar import scalars_plugin
from tensorboard.plugins.text import text_plugin

PROFILE_PLUGIN_NAME = "profile"
ALLOWED_PLUGINS = frozenset(
    [
        scalars_plugin.ScalarsPlugin.plugin_name,
        histograms_plugin.HistogramsPlugin.plugin_name,
        distributions_plugin.DistributionsPlugin.plugin_name,
        text_plugin.TextPlugin.plugin_name,
        hparams_plugin.HParamsPlugin.plugin_name,
        images_plugin.ImagesPlugin.plugin_name,
        graphs_plugin.GraphsPlugin.plugin_name,
        PROFILE_PLUGIN_NAME,
    ]
)




MIN_LOGDIR_POLL_INTERVAL_SECS = 1




MAX_VARINT64_LENGTH_BYTES = 10



DEFAULT_MIN_SCALAR_REQUEST_INTERVAL = 30


DEFAULT_MAX_SCALAR_REQUEST_SIZE = 64 * (2**10)  



DEFAULT_MIN_TENSOR_REQUEST_INTERVAL = 30



DEFAULT_MIN_BLOB_REQUEST_INTERVAL = 30


DEFAULT_MAX_TENSOR_REQUEST_SIZE = 64 * (2**10)  

DEFAULT_MAX_BLOB_REQUEST_SIZE = 64 * (2**10)  


DEFAULT_MAX_TENSOR_POINT_SIZE = 16 * (2**10)  

DEFAULT_MAX_BLOB_SIZE = 10 * (2**30)  


@dataclasses.dataclass
class UploadLimits:
    max_scalar_request_size: int = DEFAULT_MAX_SCALAR_REQUEST_SIZE
    max_tensor_request_size: int = DEFAULT_MAX_TENSOR_REQUEST_SIZE
    max_blob_request_size: int = DEFAULT_MAX_BLOB_REQUEST_SIZE

    min_scalar_request_interval: int = DEFAULT_MIN_SCALAR_REQUEST_INTERVAL
    min_tensor_request_interval: int = DEFAULT_MIN_TENSOR_REQUEST_INTERVAL
    min_blob_request_interval: int = DEFAULT_MIN_BLOB_REQUEST_INTERVAL

    max_blob_size: int = DEFAULT_MAX_BLOB_SIZE
    max_tensor_point_size: int = DEFAULT_MAX_TENSOR_POINT_SIZE
