from __future__ import annotations

from abc import ABC, abstractmethod
from typing import Generic, Iterable, Set, TypeVar

from langchain_core._api import beta

from langchain_community.graph_vectorstores import Link

InputT = TypeVar("InputT")

METADATA_LINKS_KEY = "links"


@beta()
class LinkExtractor(ABC, Generic[InputT]):
    

    @abstractmethod
    def extract_one(self, input: InputT) -> Set[Link]:
        

    def extract_many(self, inputs: Iterable[InputT]) -> Iterable[Set[Link]]:
        
        return map(self.extract_one, inputs)
