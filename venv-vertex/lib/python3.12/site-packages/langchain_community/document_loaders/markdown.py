from pathlib import Path
from typing import Any, List, Union

from langchain_community.document_loaders.unstructured import (
    UnstructuredFileLoader,
    validate_unstructured_version,
)


class UnstructuredMarkdownLoader(UnstructuredFileLoader):
      

    def __init__(
        self,
        file_path: Union[str, Path],
        mode: str = "single",
        **unstructured_kwargs: Any,
    ):
        
        file_path = str(file_path)
        validate_unstructured_version("0.4.16")
        super().__init__(file_path=file_path, mode=mode, **unstructured_kwargs)

    def _get_elements(self) -> List:
        from unstructured.partition.md import partition_md

        return partition_md(filename=self.file_path, **self.unstructured_kwargs)
