

from typing import Any, List, Sequence

from langchain_core.documents import BaseDocumentTransformer, Document
from pydantic import BaseModel, ConfigDict


def _litm_reordering(documents: List[Document]) -> List[Document]:
    

    documents.reverse()
    reordered_result = []
    for i, value in enumerate(documents):
        if i % 2 == 1:
            reordered_result.append(value)
        else:
            reordered_result.insert(0, value)
    return reordered_result


class LongContextReorder(BaseDocumentTransformer, BaseModel):
    

    model_config = ConfigDict(
        arbitrary_types_allowed=True,
    )

    def transform_documents(
        self, documents: Sequence[Document], **kwargs: Any
    ) -> Sequence[Document]:
        
        return _litm_reordering(list(documents))

    async def atransform_documents(
        self, documents: Sequence[Document], **kwargs: Any
    ) -> Sequence[Document]:
        return _litm_reordering(list(documents))
