import logging
from urllib.parse import urlparse

from langchain_core._api import deprecated

from langchain_community.chat_models.mlflow import ChatMlflow

logger = logging.getLogger(__name__)


@deprecated(
    since="0.3.3",
    removal="1.0",
    alternative_import="databricks_langchain.ChatDatabricks",
)
class ChatDatabricks(ChatMlflow):
    

    target_uri: str = "databricks"
    

    @property
    def _llm_type(self) -> str:
        
        return "databricks-chat"

    @property
    def _mlflow_extras(self) -> str:
        return ""

    def _validate_uri(self) -> None:
        if self.target_uri == "databricks":
            return

        if urlparse(self.target_uri).scheme != "databricks":
            raise ValueError(
                "Invalid target URI. The target URI must be a valid databricks URI."
            )
