













import sys

from proto.marshal import Marshal


def compile(name, attrs):
    
    
    
    module = sys.modules.get(attrs.get("__module__"))
    module_name = module.__name__ if hasattr(module, __name__) else ""
    proto_module = getattr(module, "__protobuf__", object())

    
    
    
    
    
    package = getattr(
        proto_module, "package", module_name if module_name else "_default_package"
    )
    marshal = Marshal(name=getattr(proto_module, "marshal", package))

    
    return (package, marshal)
