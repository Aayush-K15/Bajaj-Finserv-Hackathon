

from __future__ import annotations

import subprocess
from pathlib import Path


def is_git_repo(dir: Path) -> bool:
    
    return dir.joinpath('.git').exists()


def have_git() -> bool:  
    
    try:
        subprocess.check_output(['git', '--help'])
        return True
    except subprocess.CalledProcessError:
        return False
    except OSError:
        return False


def git_revision(dir: Path) -> str:
    
    return subprocess.check_output(['git', 'rev-parse', '--short', 'HEAD'], cwd=dir).decode('utf-8').strip()
